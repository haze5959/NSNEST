<div *ngIf="isLoading" class="app-detail">
  <div  class="fulfilling-square-spinner">
    <div class="spinner-inner"></div>
  </div>
</div>
<div *ngIf="!isLoading" class="app-detail">
  <!--=================== 게시글 =====================-->
  <div *ngIf="classify == 'post' || classify == 'error'" class="detail-post">
    <mat-card class="detail-post-card">
      <mat-card-header>
        <div mat-card-avatar [style.background-image]="post.publisherImg" class="profile-image" (click)="pressOneUser(post.publisherId)"></div>
        <mat-card-title>{{post.publisher}}</mat-card-title>
        <mat-card-subtitle>{{post.publisherIntro}}</mat-card-subtitle>
      </mat-card-header>
      <h1>{{post.title}}</h1>
      <mat-card-content>
        <p [innerHTML]="safeHtml"></p>
      </mat-card-content>
    </mat-card>
  </div>

  <!--=================== 앨범 =====================-->
  <div *ngIf="classify == 'elbum'" class="detail-elbum">
    <mat-card class="detail-post-card">
      <mat-card-header>
        <div mat-card-avatar [style.background-image]="post.publisherImg" class="profile-image" (click)="pressOneUser(post.publisherId)"></div>
        <mat-card-title>{{post.publisher}}</mat-card-title>
        <mat-card-subtitle>{{post.publisherIntro}}</mat-card-subtitle>
      </mat-card-header>
      <div *ngFor="let image of post.images">
        <img src="{{image}}">
      </div>
      <mat-card-content>
        <p>{{post.body}}</p>
      </mat-card-content>
      <button mat-raised-button (click)="pressImageDownload(post.images)">총 [{{post.images.length}}]개의 이미지 다운로드</button>
    </mat-card>
  </div>

  <!--=================== 지도 =====================-->
  <div *ngIf="classify == 'map'" class="detail-map">
    <mat-card class="detail-post-card">
      <mat-card-header>
        <div mat-card-avatar [style.background-image]="post.publisherImg" class="profile-image" (click)="pressOneUser(post.publisherId)"></div>
        <mat-card-title>{{post.publisher}}</mat-card-title>
        <mat-card-subtitle>{{post.publisherIntro}}</mat-card-subtitle>
      </mat-card-header>
      <h1 class="detail-elbum-card-title">{{post.title}}
        <mat-chip-list aria-orientation="horizontal" class="detail-chip">
          <mat-chip  *ngFor="let tag of post.tag" color="primary">{{tag}}</mat-chip>
        </mat-chip-list>
      </h1>

      <!-- 이미지 표시 -->
      <mat-grid-list cols="2" rowHeight="1:2" rowHeight="570px" gutterSize="0px" class="detail-elbum-imglist">
          <mat-grid-tile *ngFor="let image of post.images">
              <mat-card class="elbum-card" (click)="openImageVeiwer(image)">
                  <img class="detail-elbum-card-img" src="{{image}}" alt="Photo">
              </mat-card>
          </mat-grid-tile>
      </mat-grid-list>

      <mat-card-content>
        <p>{{post.body}}</p>
      </mat-card-content>
      <agm-map class="agm-map" [latitude]="marker.lat" [longitude]="marker.lng" [zoom]="15" [disableDefaultUI]="false" [zoomControl]="true">
        <agm-marker
            [latitude]="marker.lat"
            [longitude]="marker.lng"
            [label]="marker.label">
        </agm-marker>
      </agm-map>
    </mat-card>
  </div>

  <!--=================== 좋아요 싫어요 글삭제 =====================-->
  <div class="detail-goodBad" *ngIf="!isMine">
    <button mat-raised-button color="primary" class="detail-goodBad-btn">좋아요({{post.good}})</button>
    <button mat-raised-button color="accent" class="detail-goodBad-btn">싫어요({{post.bad}})</button>
  </div>
  <div class="detail-goodBad" *ngIf="isMine">
    <button mat-raised-button color="primary" class="detail-goodBad-btn">좋아요({{post.good}})</button>
    <button mat-raised-button color="accent" class="detail-goodBad-btn">싫어요({{post.bad}})</button>
    <button mat-raised-button color="accent" class="detail-goodBad-btn">게시글 삭제하기</button>
  </div>
  <!--=================== 코맨트 =====================-->
  <mat-list>
    <mat-list-item *ngFor="let comment of comments" class="detail-comment">
      <div mat-list-icon [style.background-image]="comment.userImg" class="profile-image"></div>
      <h4 mat-line>{{comment.userName}}</h4>
      <p mat-line>{{comment.commentDate | date:'M월 d일 H시'}}</p>
      <div class="comment-content">{{comment.comment}}</div>
      <mat-divider></mat-divider>
    </mat-list-item>
  </mat-list>
  <!--=================== 코맨트 달기 =====================-->
  <mat-list>
    <mat-list-item class="detail-comment">
      <div mat-list-icon [style.background-image]="myInfo.image" class="profile-image"></div>
      <h4 mat-line>{{myInfo.name}}</h4>
      <!-- <p mat-line>{{comment.commentDate | date:'M월 d일 H시'}}</p> -->
      <mat-form-field class="comment-content-input">
        <textarea #comment matInput placeholder="댓글달기"></textarea>
      </mat-form-field>
    </mat-list-item>
  </mat-list>

  <div class="detail-regist-comment">
    <button mat-raised-button (click)="pressCommentRegist(comment.value)">등록하기</button>
  </div>
</div>